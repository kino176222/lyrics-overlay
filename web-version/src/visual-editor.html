<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¨ æ­Œè©ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Hiragino Sans', 'Yu Gothic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
        }
        
        /* ã‚µã‚¤ãƒ‰ãƒãƒ¼ */
        .sidebar {
            width: 450px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            overflow-y: auto;
            padding: 20px;
        }
        
        h1 {
            color: #333;
            margin-bottom: 20px;
            font-size: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        h2 {
            color: #555;
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 16px;
            border-bottom: 2px solid #667eea;
            padding-bottom: 3px;
        }
        
        /* ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚°ãƒ«ãƒ¼ãƒ— */
        .control-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            color: #666;
            font-size: 14px;
            font-weight: 500;
        }
        
        input[type="text"],
        input[type="number"],
        input[type="color"],
        select,
        textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        input[type="text"]:focus,
        input[type="number"]:focus,
        select:focus,
        textarea:focus {
            border-color: #667eea;
            outline: none;
        }
        
        input[type="range"] {
            width: 100%;
            margin-top: 5px;
        }
        
        .range-value {
            text-align: right;
            color: #667eea;
            font-weight: bold;
            margin-top: 5px;
        }
        
        textarea {
            min-height: 120px;
            resize: vertical;
            font-family: monospace;
        }
        
        /* ãƒœã‚¿ãƒ³ */
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        button {
            flex: 1;
            padding: 12px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }
        
        .secondary-button {
            background: #6c757d;
        }
        
        /* ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¨ãƒªã‚¢ */
        .preview-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 20px;
            min-height: 100vh;
        }
        
        .preview-controls {
            background: rgba(255, 255, 255, 0.95);
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 15px;
            display: flex;
            gap: 8px;
            align-items: center;
            font-size: 14px;
        }
        
        .preview-controls button {
            padding: 8px 12px;
            font-size: 12px;
        }
        
        .preview-area {
            background: #000;
            border-radius: 8px;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            height: 400px;
            width: 100%;
            max-width: 720px;
            margin: 0 auto;
            aspect-ratio: 16/9;
        }
        
        /* ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ­Œè© */
        .preview-lyrics {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            width: 100%;
            transition: all 0.3s;
        }
        
        .preview-lyrics-background {
            background: rgba(0, 0, 0, 0.7);
            padding: 15px 30px;
            border-radius: 12px;
            display: inline-block;
            backdrop-filter: blur(10px);
        }
        
        .preview-lyrics-text {
            font-family: 'Hiragino Mincho ProN', 'Yu Mincho', serif;
            font-size: 36px;
            color: black;
            text-shadow: 0 0 20px rgba(255,255,255,0.9), 0 0 10px rgba(255,255,255,0.8);
            margin: 0;
            font-weight: bold;
        }
        
        /* ãƒ—ãƒªã‚»ãƒƒãƒˆ */
        .preset-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 10px;
        }
        
        .preset-button {
            padding: 10px;
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 12px;
        }
        
        .preset-button:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }
        
        /* ã‚¿ãƒ– */
        .tabs {
            display: flex;
            gap: 3px;
            margin-bottom: 20px;
            background: #e9ecef;
            border-radius: 10px;
            padding: 4px;
        }
        
        .tab {
            flex: 1;
            padding: 12px 16px;
            background: transparent;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            color: #6c757d;
            font-weight: 500;
            font-size: 14px;
        }
        
        .tab.active {
            background: white;
            color: #667eea;
            font-weight: bold;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.2);
            transform: translateY(-1px);
        }
        
        .tab:hover:not(.active) {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* ã‚«ãƒ©ãƒ¼ãƒ”ãƒƒã‚«ãƒ¼ã‚°ãƒ«ãƒ¼ãƒ— */
        .color-input-group {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .color-input-group input[type="color"] {
            width: 50px;
            height: 40px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
        }
        
        .color-input-group input[type="text"] {
            flex: 1;
        }
        
        /* ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ */
        .file-upload {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: 3px dashed rgba(255, 255, 255, 0.8);
            border-radius: 12px;
            padding: 30px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
            font-weight: bold;
            position: relative;
            overflow: hidden;
        }
        
        .file-upload::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            transform: rotate(45deg);
            transition: all 0.5s;
            opacity: 0;
        }
        
        .file-upload:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
            border-color: rgba(255, 255, 255, 1);
        }
        
        .file-upload:hover::before {
            opacity: 1;
            animation: shine 0.5s ease-in-out;
        }
        
        .file-upload.dragover {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            border-color: rgba(255, 255, 255, 1);
            transform: scale(1.02);
        }
        
        .file-upload p:first-child {
            font-size: 18px;
            margin-bottom: 8px;
            text-shadow: 0 1px 3px rgba(0,0,0,0.3);
        }
        
        .file-upload p:last-child {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
            margin-top: 8px;
        }
        
        @keyframes shine {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        /* ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ— */
        .tooltip {
            position: relative;
            display: inline-block;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 280px;
            max-width: 90vw;
            background-color: rgba(0, 0, 0, 0.95);
            color: #fff;
            text-align: left;
            border-radius: 10px;
            padding: 12px 15px;
            position: fixed;
            z-index: 10000;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 13px;
            line-height: 1.5;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        
        /* ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ã‚¹ãƒ”ãƒŠãƒ¼ */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
    <div class="sidebar">
        <h1>
            ğŸ¨ ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼
        </h1>
        
        <!-- ã‚¿ãƒ– -->
        <div class="tabs">
            <button class="tab active" onclick="switchTab('style')">ã‚¹ã‚¿ã‚¤ãƒ«</button>
            <button class="tab" onclick="switchTab('animation')">ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³</button>
            <button class="tab" onclick="switchTab('lyrics')">æ­Œè©</button>
        </div>
        
        <!-- ã‚¹ã‚¿ã‚¤ãƒ«ã‚¿ãƒ– -->
        <div class="tab-content active" id="style-tab">
            <h2>ğŸ“ ãƒ†ã‚­ã‚¹ãƒˆè¨­å®š</h2>
            
            <div class="control-group">
                <label>ãƒ•ã‚©ãƒ³ãƒˆ</label>
                <div class="tooltip">
                    <select id="font-family" onchange="updatePreview()">
                        <option value='"Hiragino Mincho ProN", "Yu Mincho", serif'>æ˜æœä½“ï¼ˆã‚¨ãƒ¬ã‚¬ãƒ³ãƒˆï¼‰</option>
                        <option value='"Hiragino Sans", "Yu Gothic", sans-serif'>ã‚´ã‚·ãƒƒã‚¯ä½“ï¼ˆãƒ¢ãƒ€ãƒ³ï¼‰</option>
                        <option value='"M PLUS Rounded 1c", sans-serif'>ä¸¸ã‚´ã‚·ãƒƒã‚¯ï¼ˆã‹ã‚ã„ã„ï¼‰</option>
                        <option value='Georgia, "Times New Roman", serif'>è‹±èªã‚»ãƒªãƒ•</option>
                        <option value='"Helvetica Neue", Arial, sans-serif'>è‹±èªã‚µãƒ³ã‚»ãƒªãƒ•</option>
                    </select>
                    <span class="tooltiptext">ğŸ“ <strong>ãƒ•ã‚©ãƒ³ãƒˆ</strong> = æ–‡å­—ã®è¦‹ãŸç›®<br><br>ãƒ»<strong>æ˜æœä½“</strong>ï¼šä¸Šå“ã§èª­ã¿ã‚„ã™ã„æ—¥æœ¬èªã®æ–‡å­—<br>ãƒ»<strong>ã‚´ã‚·ãƒƒã‚¯ä½“</strong>ï¼šå¤ªãã¦ã¯ã£ãã‚Šã—ãŸæ–‡å­—<br>ãƒ»<strong>ä¸¸ã‚´ã‚·ãƒƒã‚¯</strong>ï¼šè§’ãŒä¸¸ãã¦ã‹ã‚ã„ã„æ–‡å­—</span>
                </div>
            </div>
            
            <div class="control-group">
                <label>æ–‡å­—ã‚µã‚¤ã‚º: <span class="range-value" id="font-size-value">52px</span></label>
                <div class="tooltip">
                    <input type="range" id="font-size" min="20" max="120" value="52" onchange="updatePreview()">
                    <span class="tooltiptext">ğŸ“ <strong>æ–‡å­—ã‚µã‚¤ã‚º</strong><br><br>ãƒ»<strong>20px</strong>ï¼šã¨ã¦ã‚‚å°ã•ã„æ–‡å­—<br>ãƒ»<strong>50px</strong>ï¼šæ™®é€šã®å¤§ãã•<br>ãƒ»<strong>120px</strong>ï¼šã¨ã¦ã‚‚å¤§ãã„æ–‡å­—<br><br>å‹•ç”»ã®å¤§ãã•ã«åˆã‚ã›ã¦èª¿æ•´ã—ã¦ã­ï¼</span>
                </div>
            </div>
            
            <div class="control-group">
                <label>æ–‡å­—ã®å¤ªã•</label>
                <div class="tooltip">
                    <select id="font-weight" onchange="updatePreview()">
                        <option value="normal">é€šå¸¸</option>
                        <option value="bold" selected>å¤ªå­—</option>
                        <option value="900">æ¥µå¤ª</option>
                    </select>
                    <span class="tooltiptext">ğŸ’ª <strong>æ–‡å­—ã®å¤ªã•</strong><br><br>ãƒ»<strong>é€šå¸¸</strong>ï¼šæ™®é€šã®ç´°ã•ã®æ–‡å­—<br>ãƒ»<strong>å¤ªå­—</strong>ï¼šå°‘ã—å¤ªã„æ–‡å­—ï¼ˆãŠã™ã™ã‚ï¼‰<br>ãƒ»<strong>æ¥µå¤ª</strong>ï¼šã¨ã¦ã‚‚å¤ªã„æ–‡å­—<br><br>å¤ªã„æ–‡å­—ã®æ–¹ãŒå‹•ç”»ã§è¦‹ã‚„ã™ã„ã‚ˆï¼</span>
                </div>
            </div>
            
            <div class="control-group">
                <label>æ–‡å­—è‰²</label>
                <div class="color-input-group tooltip">
                    <input type="color" id="text-color" value="#000000" onchange="updatePreview()">
                    <input type="text" id="text-color-hex" value="#000000" onchange="updateColorFromHex('text')">
                    <span class="tooltiptext">ğŸ¨ <strong>æ–‡å­—ã®è‰²ã‚’é¸ã¶</strong><br><br>ãƒ»å·¦ã®å››è§’ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦è‰²ã‚’é¸æŠ<br>ãƒ»å³ã®æ¬„ã«ã€Œ#FF0000ã€ã®ã‚ˆã†ãªè‰²ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ã‚‚OK<br><br>èƒŒæ™¯ã®è‰²ã¨é‡ãªã‚‰ãªã„è‰²ã‚’é¸ã‚“ã§ã­ï¼</span>
                </div>
            </div>
            
            <h2>âœ¨ ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ</h2>
            
            <div class="control-group">
                <label>ã‚°ãƒ­ãƒ¼åŠ¹æœã®å¼·ã•: <span class="range-value" id="glow-strength-value">ä¸­</span></label>
                <div class="tooltip">
                    <input type="range" id="glow-strength" min="0" max="100" value="50" onchange="updatePreview()">
                    <span class="tooltiptext">âœ¨ <strong>ã‚°ãƒ­ãƒ¼åŠ¹æœ</strong> = æ–‡å­—ã®å‘¨ã‚Šã®å…‰<br><br>ãƒ»<strong>0</strong>ï¼šå…‰ã‚‰ãªã„ï¼ˆæ™®é€šã®æ–‡å­—ï¼‰<br>ãƒ»<strong>50</strong>ï¼šã»ã‚“ã®ã‚Šå…‰ã‚‹<br>ãƒ»<strong>100</strong>ï¼šã™ã”ãå…‰ã‚‹ï¼<br><br>æš—ã„å ´é¢ã§ã‚‚æ–‡å­—ãŒã¯ã£ãã‚Šè¦‹ãˆã‚‹ã‚ˆã†ã«ãªã‚‹ã‚ˆ</span>
                </div>
            </div>
            
            <div class="control-group">
                <label>ã‚°ãƒ­ãƒ¼è‰²</label>
                <div class="color-input-group tooltip">
                    <input type="color" id="glow-color" value="#FFFFFF" onchange="updatePreview()">
                    <input type="text" id="glow-color-hex" value="#FFFFFF" onchange="updateColorFromHex('glow')">
                    <span class="tooltiptext">ğŸŒŸ <strong>å…‰ã‚‹è‰²ã‚’é¸ã¶</strong><br><br>ãƒ»æ–‡å­—ã®å‘¨ã‚Šã«å…‰ã‚‹è‰²<br>ãƒ»ç™½ã ã¨è‡ªç„¶ãªå…‰ã‚Šæ–¹<br>ãƒ»é»„è‰²ã ã¨æš–ã‹ã„æ„Ÿã˜<br>ãƒ»é’ã ã¨å†·ãŸã„æ„Ÿã˜</span>
                </div>
            </div>
            
            <div class="control-group">
                <div class="tooltip">
                    <label>
                        <input type="checkbox" id="use-background" checked onchange="updatePreview()">
                        èƒŒæ™¯ã‚’ä½¿ç”¨ï¼ˆåŠé€æ˜ã®é»’ï¼‰
                    </label>
                    <span class="tooltiptext">ğŸ–¼ï¸ <strong>æ–‡å­—ã®å¾Œã‚ã«èƒŒæ™¯ã‚’ã¤ã‘ã‚‹</strong><br><br>ãƒ»ãƒã‚§ãƒƒã‚¯ONï¼šæ–‡å­—ã®å¾Œã‚ã«è–„ã„é»’ã„å››è§’<br>ãƒ»ãƒã‚§ãƒƒã‚¯OFFï¼šèƒŒæ™¯ãªã—ï¼ˆé€æ˜ï¼‰<br><br>èƒŒæ™¯ãŒã‚ã‚‹ã¨æ–‡å­—ãŒèª­ã¿ã‚„ã™ããªã‚‹ã‚ˆ</span>
                </div>
            </div>
            
            <div class="control-group" id="background-opacity-group">
                <label>èƒŒæ™¯ã®é€æ˜åº¦: <span class="range-value" id="bg-opacity-value">70%</span></label>
                <div class="tooltip">
                    <input type="range" id="bg-opacity" min="0" max="100" value="70" onchange="updatePreview()">
                    <span class="tooltiptext">ğŸ‘» <strong>èƒŒæ™¯ã®æ¿ƒã•</strong><br><br>ãƒ»<strong>0%</strong>ï¼šå®Œå…¨ã«é€æ˜ï¼ˆè¦‹ãˆãªã„ï¼‰<br>ãƒ»<strong>50%</strong>ï¼šåŠé€æ˜<br>ãƒ»<strong>100%</strong>ï¼šå®Œå…¨ã«é»’<br><br>70%ãã‚‰ã„ãŒã¡ã‚‡ã†ã©ã„ã„æ„Ÿã˜ï¼</span>
                </div>
            </div>
            
            <h2>ğŸ“ ä½ç½®</h2>
            
            <div class="control-group">
                <label>ä¸‹ã‹ã‚‰ã®è·é›¢: <span class="range-value" id="position-value">26px</span></label>
                <div class="tooltip">
                    <input type="range" id="position-bottom" min="0" max="200" value="26" onchange="updatePreview()">
                    <span class="tooltiptext">ğŸ“ <strong>æ–‡å­—ã®ä½ç½®</strong><br><br>ãƒ»ç”»é¢ã®ä¸€ç•ªä¸‹ã‹ã‚‰ã©ã‚Œãã‚‰ã„é›¢ã™ã‹<br>ãƒ»<strong>0px</strong>ï¼šç”»é¢ã®ä¸€ç•ªä¸‹<br>ãƒ»<strong>100px</strong>ï¼šç”»é¢ä¸‹ã‹ã‚‰å°‘ã—ä¸Š<br><br>26pxãã‚‰ã„ã ã¨è¦‹ã‚„ã™ã„ã‚ˆï¼</span>
                </div>
            </div>
            
            <h2>ğŸ¯ ãƒ—ãƒªã‚»ãƒƒãƒˆ</h2>
            <div class="preset-grid tooltip">
                <button class="preset-button" onclick="applyPreset('elegant')">ã‚¨ãƒ¬ã‚¬ãƒ³ãƒˆ</button>
                <button class="preset-button" onclick="applyPreset('pop')">ãƒãƒƒãƒ—</button>
                <button class="preset-button" onclick="applyPreset('minimal')">ãƒŸãƒ‹ãƒãƒ«</button>
                <button class="preset-button" onclick="applyPreset('karaoke')">ã‚«ãƒ©ã‚ªã‚±</button>
                <button class="preset-button" onclick="applyPreset('youtube')">YouTubeå­—å¹•</button>
                <button class="preset-button" onclick="applyPreset('movie')">æ˜ ç”»å­—å¹•</button>
                <span class="tooltiptext">ğŸ¨ <strong>ã‹ã‚“ãŸã‚“è¨­å®š</strong><br><br>ãƒ»<strong>ã‚¨ãƒ¬ã‚¬ãƒ³ãƒˆ</strong>ï¼šä¸Šå“ã§ç¾ã—ã„<br>ãƒ»<strong>ãƒãƒƒãƒ—</strong>ï¼šã‚«ãƒ©ãƒ•ãƒ«ã§å…ƒæ°—<br>ãƒ»<strong>ãƒŸãƒ‹ãƒãƒ«</strong>ï¼šã‚·ãƒ³ãƒ—ãƒ«ã§æ´—ç·´<br>ãƒ»<strong>ã‚«ãƒ©ã‚ªã‚±</strong>ï¼šé»„è‰²ã„æ–‡å­—ã§æ¥½ã—ã„<br>ãƒ»<strong>YouTubeå­—å¹•</strong>ï¼šè¦‹æ…£ã‚ŒãŸæ„Ÿã˜<br>ãƒ»<strong>æ˜ ç”»å­—å¹•</strong>ï¼šæ˜ ç”»é¤¨ã¿ãŸã„</span>
            </div>
        </div>
        
        <!-- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¿ãƒ– -->
        <div class="tab-content" id="animation-tab">
            <h2>ğŸ¬ ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³</h2>
            
            <div class="control-group">
                <label>ç™»å ´ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³</label>
                <div class="tooltip">
                    <select id="animation-in" onchange="updatePreview()">
                        <option value="fade" selected>ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³</option>
                        <option value="slide-up">ä¸‹ã‹ã‚‰ã‚¹ãƒ©ã‚¤ãƒ‰</option>
                        <option value="scale">æ‹¡å¤§</option>
                        <option value="bounce">ãƒã‚¦ãƒ³ã‚¹</option>
                        <option value="none">ãªã—</option>
                    </select>
                    <span class="tooltiptext">ğŸ¬ <strong>æ­Œè©ãŒå‡ºã¦ãã‚‹æ™‚ã®å‹•ã</strong><br><br>ãƒ»<strong>ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³</strong>ï¼šãµã‚ã£ã¨ç¾ã‚Œã‚‹<br>ãƒ»<strong>ä¸‹ã‹ã‚‰ã‚¹ãƒ©ã‚¤ãƒ‰</strong>ï¼šä¸‹ã‹ã‚‰ã«ã‚…ã‚‹ã£ã¨<br>ãƒ»<strong>æ‹¡å¤§</strong>ï¼šå°ã•ã„â†’å¤§ãã<br>ãƒ»<strong>ãƒã‚¦ãƒ³ã‚¹</strong>ï¼šã´ã‚‡ã‚“ã´ã‚‡ã‚“è·³ã­ã‚‹<br>ãƒ»<strong>ãªã—</strong>ï¼šã„ããªã‚Šç¾ã‚Œã‚‹</span>
                </div>
            </div>
            
            <div class="control-group">
                <label>é€€å ´ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³</label>
                <div class="tooltip">
                    <select id="animation-out" onchange="updatePreview()">
                        <option value="fade" selected>ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆ</option>
                        <option value="slide-down">ä¸‹ã¸ã‚¹ãƒ©ã‚¤ãƒ‰</option>
                        <option value="scale">ç¸®å°</option>
                        <option value="none">ãªã—</option>
                    </select>
                    <span class="tooltiptext">ğŸ‘‹ <strong>æ­Œè©ãŒæ¶ˆãˆã‚‹æ™‚ã®å‹•ã</strong><br><br>ãƒ»<strong>ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆ</strong>ï¼šã ã‚“ã ã‚“è–„ããªã£ã¦æ¶ˆãˆã‚‹<br>ãƒ»<strong>ä¸‹ã¸ã‚¹ãƒ©ã‚¤ãƒ‰</strong>ï¼šä¸‹ã«ãšã‚Šãšã‚Šè½ã¡ã‚‹<br>ãƒ»<strong>ç¸®å°</strong>ï¼šã ã‚“ã ã‚“å°ã•ããªã£ã¦æ¶ˆãˆã‚‹<br>ãƒ»<strong>ãªã—</strong>ï¼šã„ããªã‚Šæ¶ˆãˆã‚‹</span>
                </div>
            </div>
            
            <div class="control-group">
                <label>ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é€Ÿåº¦: <span class="range-value" id="animation-speed-value">æ™®é€š</span></label>
                <div class="tooltip">
                    <input type="range" id="animation-speed" min="1" max="100" value="50" onchange="updatePreview()">
                    <span class="tooltiptext">âš¡ <strong>ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®é€Ÿã•</strong><br><br>ãƒ»<strong>é…ã„</strong>ï¼šã‚†ã£ãã‚Šã—ãŸå‹•ã<br>ãƒ»<strong>æ™®é€š</strong>ï¼šã¡ã‚‡ã†ã©ã„ã„é€Ÿã•<br>ãƒ»<strong>é€Ÿã„</strong>ï¼šã‚­ãƒ“ã‚­ãƒ“ã—ãŸå‹•ã<br><br>æ™®é€šãŒãŠã™ã™ã‚ã ã‚ˆï¼</span>
                </div>
            </div>
        </div>
        
        <!-- æ­Œè©ã‚¿ãƒ– -->
        <div class="tab-content" id="lyrics-tab">
            <h2>ğŸ“ æ­Œè©ã¨ã‚¿ã‚¤ãƒŸãƒ³ã‚°</h2>
            
            <div class="control-group">
                <label>æ­Œè©ãƒ†ã‚­ã‚¹ãƒˆï¼ˆ1è¡Œãšã¤ï¼‰</label>
                <textarea id="lyrics-input" placeholder="ã“ã“ã«æ­Œè©ã‚’å…¥åŠ›ï¼ˆ1è¡Œãšã¤ï¼‰">æ€è€ƒã®ã‚¹ãƒ”ãƒ¼ãƒ‰ã« è¿½ã„ã¤ã‘ãªãã¦
å®ˆã‚ŠãŸã„ã‚‚ã®ãŒ å¢—ãˆã¦ã„ãã®ã«
é€†å†ç”Ÿã§ããªã„æ™‚é–“ã«ã€ã—ã³ã‚Œã¦ã‚‹</textarea>
            </div>
            
            <div class="control-group file-upload tooltip" id="audio-upload">
                <input type="file" id="audio-file" accept=".mp3" style="display: none;">
                <p>ğŸµ MP3ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‰ãƒ­ãƒƒãƒ—ã¾ãŸã¯ã‚¯ãƒªãƒƒã‚¯</p>
                <p style="font-size: 12px; color: #666; margin-top: 5px;">éŸ³æ¥½ã®é•·ã•ã‹ã‚‰è‡ªå‹•ã§ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’è¨ˆç®—ã—ã¾ã™</p>
                <span class="tooltiptext">ğŸµ <strong>éŸ³æ¥½ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</strong><br><br>ãƒ»éŸ³æ¥½ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆMP3ï¼‰ã‚’ã“ã“ã«ãƒ‰ãƒ­ãƒƒãƒ—<br>ãƒ»ã¾ãŸã¯ã€ã“ã“ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸ã¶<br><br>éŸ³æ¥½ã®é•·ã•ã‚’è‡ªå‹•ã§æ¸¬ã£ã¦ã€æ­Œè©ãŒã„ã„ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§è¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«è¨ˆç®—ã—ã¦ãã‚Œã‚‹ã‚ˆï¼</span>
            </div>
            
            <div class="control-group">
                <label class="tooltip">è¡¨ç¤ºç§’æ•°ï¼ˆ1è¡Œã‚ãŸã‚Šï¼‰
                    <span class="tooltiptext">â±ï¸ <strong>1è¡ŒãŒè¡¨ç¤ºã•ã‚Œã‚‹æ™‚é–“</strong><br><br>ãƒ»1ã¤ã®æ­Œè©ãŒç”»é¢ã«å‡ºã¦ã„ã‚‹ç§’æ•°<br>ãƒ»4ç§’ = ã‚†ã£ãã‚Šèª­ã‚ã‚‹<br>ãƒ»2ç§’ = æ—©ã‚ã®ãƒ†ãƒ³ãƒ<br>ãƒ»éŸ³æ¥½ã®ãƒªã‚ºãƒ ã«åˆã‚ã›ã¦èª¿æ•´ã—ã‚ˆã†</span>
                </label>
                <input type="number" id="duration-per-line" value="4" min="1" max="10" step="0.5">
            </div>
        </div>
        
        <!-- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ -->
        <h2>ğŸ¬ å‹•ç”»ç”Ÿæˆ</h2>
        
        <div class="button-group" style="flex-direction: column; gap: 15px;">
            <!-- åˆå¿ƒè€…ãƒ¢ãƒ¼ãƒ‰ -->
            <div class="tooltip">
                <button onclick="generateVideoQuick()" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%); font-size: 18px; padding: 15px;">
                    ğŸš€ ç°¡å˜å‹•ç”»ç”Ÿæˆï¼ˆæ¨å¥¨ï¼‰
                </button>
                <span class="tooltiptext">ğŸš€ <strong>ä¸€ç•ªç°¡å˜ãªå‹•ç”»ä½œæˆæ–¹æ³•ï¼</strong><br><br>ãƒ»ãƒœã‚¿ãƒ³ã‚’1å›æŠ¼ã™ã ã‘ã§å‹•ç”»ãŒã§ãã‚‹<br>ãƒ»è¨­å®šã¯è‡ªå‹•ã§ã„ã„æ„Ÿã˜ã«ã—ã¦ãã‚Œã‚‹<br>ãƒ»3ã€œ5åˆ†ãã‚‰ã„ã§å®Œæˆã™ã‚‹<br><br><strong>åˆã‚ã¦ã®äººã¯ã“ã‚ŒãŒãŠã™ã™ã‚ï¼</strong></span>
            </div>
            
            <!-- ä¸Šç´šè€…ãƒ¢ãƒ¼ãƒ‰ -->
            <div style="display: flex; gap: 10px;">
                <div class="tooltip" style="flex: 1;">
                    <button onclick="generateJSON()">
                        ğŸ’¾ JSONä¿å­˜
                    </button>
                    <span class="tooltiptext">ğŸ’¾ <strong>è¨­å®šã‚’ä¿å­˜ã™ã‚‹</strong><br><br>ğŸ“ <strong>JSONãƒ•ã‚¡ã‚¤ãƒ«</strong>ï¼šã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ç”¨ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«<br>ãƒ»ä»Šé¸ã‚“ã ãƒ•ã‚©ãƒ³ãƒˆã‚„ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®è¨­å®šãŒè¨˜éŒ²ã•ã‚Œã‚‹<br>ãƒ»æ¬¡å›åŒã˜è¨­å®šã‚’ä½¿ã„ãŸã„æ™‚ã«ä¾¿åˆ©<br>ãƒ»ä¸Šç´šè€…å‘ã‘ã®æ©Ÿèƒ½</span>
                </div>
                <div class="tooltip" style="flex: 1;">
                    <button onclick="openRemotionStudio()" class="secondary-button">
                        ğŸ¨ è©³ç´°ç·¨é›†
                    </button>
                    <span class="tooltiptext">ğŸ¨ <strong>ã‚‚ã£ã¨è©³ã—ãç·¨é›†ã—ãŸã„äººå‘ã‘</strong><br><br>ãƒ»4Kç”»è³ªã®å‹•ç”»ãŒä½œã‚Œã‚‹<br>ãƒ»ç´°ã‹ã„è¨­å®šã‚’ã„ã˜ã‚Œã‚‹<br>ãƒ»ãƒ—ãƒ­ä»•æ§˜ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã†<br><br><strong>æ…£ã‚Œã¦ããŸäººã«ãŠã™ã™ã‚ï¼</strong></span>
                </div>
            </div>
            
            <!-- ãã®ä»–ã®ãƒ„ãƒ¼ãƒ« -->
            <div class="tooltip">
                <button onclick="exportStyles()" class="secondary-button" style="font-size: 14px;">
                    ğŸ“‹ CSSã‚³ãƒ”ãƒ¼
                </button>
                <span class="tooltiptext">ğŸ“‹ <strong>ã‚¹ã‚¿ã‚¤ãƒ«è¨­å®šã‚’ã‚³ãƒ”ãƒ¼</strong><br><br>ğŸ’» <strong>CSS</strong>ï¼šãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã®è¦‹ãŸç›®ã‚’ä½œã‚‹ã‚³ãƒ¼ãƒ‰<br>ãƒ»ä»Šã®æ–‡å­—ã®è‰²ã‚„ã‚µã‚¤ã‚ºã®è¨­å®šã‚’ã‚³ãƒ”ãƒ¼<br>ãƒ»ä»–ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ä½¿ãˆã‚‹<br>ãƒ»ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼å‘ã‘ã®æ©Ÿèƒ½</span>
            </div>
        </div>
        
        <!-- é€²æ—è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
        <div id="progress-area" style="display: none; margin-top: 20px; padding: 15px; background: rgba(0,123,255,0.1); border-radius: 8px; border: 1px solid #007bff;">
            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                <div id="progress-spinner" style="width: 20px; height: 20px; border: 2px solid #007bff; border-top: 2px solid transparent; border-radius: 50%; animation: spin 1s linear infinite;"></div>
                <span id="progress-text">å‹•ç”»ç”Ÿæˆæº–å‚™ä¸­...</span>
            </div>
            <div style="background: #e9ecef; border-radius: 10px; overflow: hidden;">
                <div id="progress-bar" style="background: #007bff; height: 8px; width: 0%; transition: width 0.3s;"></div>
            </div>
        </div>
    </div>
    
    <!-- ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¨ãƒªã‚¢ -->
    <div class="preview-container">
        <div class="preview-controls">
            <div class="tooltip">
                <button onclick="playPreview()">â–¶ï¸ å†ç”Ÿ</button>
                <span class="tooltiptext">â–¶ï¸ <strong>ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’è¦‹ã‚‹</strong><br><br>ãƒ»æ­Œè©ãŒã©ã‚“ãªé¢¨ã«è¡¨ç¤ºã•ã‚Œã‚‹ã‹ãƒ†ã‚¹ãƒˆ<br>ãƒ»è‡ªå‹•ã§æ­Œè©ãŒæ¬¡ã€…ã¨è¡¨ç¤ºã•ã‚Œã‚‹<br>ãƒ»éŸ³æ¥½ã¯æµã‚Œãªã„ã‚ˆï¼ˆè¦‹ãŸç›®ã ã‘ï¼‰</span>
            </div>
            <div class="tooltip">
                <button onclick="pausePreview()">â¸ ä¸€æ™‚åœæ­¢</button>
                <span class="tooltiptext">â¸ <strong>ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æ­¢ã‚ã‚‹</strong><br><br>ãƒ»å†ç”Ÿä¸­ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ä¸€æ™‚åœæ­¢<br>ãƒ»ä»Šè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹æ­Œè©ã§æ­¢ã¾ã‚‹</span>
            </div>
            <div class="tooltip">
                <button onclick="resetPreview()">â® ãƒªã‚»ãƒƒãƒˆ</button>
                <span class="tooltiptext">â® <strong>æœ€åˆã«æˆ»ã‚‹</strong><br><br>ãƒ»ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æ­¢ã‚ã‚‹<br>ãƒ»1è¡Œç›®ã®æ­Œè©ã«æˆ»ã‚‹<br>ãƒ»æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã—ãŸã„æ™‚ã«</span>
            </div>
            <span style="flex: 1; text-align: center;" id="current-lyric-info">ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼: 1è¡Œç›®</span>
        </div>
        
        <div class="preview-area" id="preview-area">
            <div class="preview-lyrics" id="preview-lyrics">
                <div class="preview-lyrics-background" id="preview-background">
                    <h1 class="preview-lyrics-text" id="preview-text">
                        æ€è€ƒã®ã‚¹ãƒ”ãƒ¼ãƒ‰ã« è¿½ã„ã¤ã‘ãªãã¦
                    </h1>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        let currentLyricIndex = 0;
        let playInterval = null;
        let audioDuration = 0;
        
        // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
        function switchTab(tabName) {
            // ã™ã¹ã¦ã®ã‚¿ãƒ–ã¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’éã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            // é¸æŠã•ã‚ŒãŸã‚¿ãƒ–ã¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«
            event.target.classList.add('active');
            document.getElementById(`${tabName}-tab`).classList.add('active');
        }
        
        // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ›´æ–°
        function updatePreview() {
            const previewText = document.getElementById('preview-text');
            const previewBackground = document.getElementById('preview-background');
            const previewLyrics = document.getElementById('preview-lyrics');
            
            // ãƒ•ã‚©ãƒ³ãƒˆè¨­å®š
            const fontFamily = document.getElementById('font-family').value;
            const fontSize = document.getElementById('font-size').value;
            const fontWeight = document.getElementById('font-weight').value;
            const textColor = document.getElementById('text-color').value;
            
            document.getElementById('font-size-value').textContent = `${fontSize}px`;
            
            previewText.style.fontFamily = fontFamily;
            previewText.style.fontSize = `${fontSize}px`;
            previewText.style.fontWeight = fontWeight;
            previewText.style.color = textColor;
            
            // ã‚°ãƒ­ãƒ¼åŠ¹æœ
            const glowStrength = document.getElementById('glow-strength').value;
            const glowColor = document.getElementById('glow-color').value;
            
            let glowText = '';
            if (glowStrength > 0) {
                const strength = glowStrength / 100;
                glowText = `0 0 ${20 * strength}px ${glowColor}, 0 0 ${10 * strength}px ${glowColor}, 0 0 ${5 * strength}px ${glowColor}`;
            }
            previewText.style.textShadow = glowText;
            
            document.getElementById('glow-strength-value').textContent = 
                glowStrength == 0 ? 'ãªã—' : 
                glowStrength < 33 ? 'å¼±' :
                glowStrength < 66 ? 'ä¸­' : 'å¼·';
            
            // èƒŒæ™¯è¨­å®š
            const useBackground = document.getElementById('use-background').checked;
            const bgOpacity = document.getElementById('bg-opacity').value / 100;
            
            document.getElementById('background-opacity-group').style.display = useBackground ? 'block' : 'none';
            document.getElementById('bg-opacity-value').textContent = `${bgOpacity * 100}%`;
            
            if (useBackground) {
                previewBackground.style.display = 'inline-block';
                previewBackground.style.backgroundColor = `rgba(0, 0, 0, ${bgOpacity})`;
            } else {
                previewBackground.style.display = 'contents';
                previewBackground.style.backgroundColor = 'transparent';
            }
            
            // ä½ç½®è¨­å®š
            const positionBottom = document.getElementById('position-bottom').value;
            previewLyrics.style.bottom = `${positionBottom}px`;
            document.getElementById('position-value').textContent = `${positionBottom}px`;
            
            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é€Ÿåº¦
            const animSpeed = document.getElementById('animation-speed').value;
            document.getElementById('animation-speed-value').textContent = 
                animSpeed < 33 ? 'é…ã„' :
                animSpeed < 66 ? 'æ™®é€š' : 'é€Ÿã„';
        }
        
        // ã‚«ãƒ©ãƒ¼å…¥åŠ›ã®åŒæœŸ
        function updateColorFromHex(type) {
            const hexInput = document.getElementById(`${type}-color-hex`);
            const colorInput = document.getElementById(`${type}-color`);
            colorInput.value = hexInput.value;
            updatePreview();
        }
        
        // ãƒ—ãƒªã‚»ãƒƒãƒˆé©ç”¨
        function applyPreset(presetName) {
            const presets = {
                elegant: {
                    fontFamily: '"Hiragino Mincho ProN", "Yu Mincho", serif',
                    fontSize: 52,
                    fontWeight: 'bold',
                    textColor: '#000000',
                    glowStrength: 50,
                    glowColor: '#FFFFFF',
                    useBackground: true,
                    bgOpacity: 70,
                    positionBottom: 26
                },
                pop: {
                    fontFamily: '"M PLUS Rounded 1c", sans-serif',
                    fontSize: 60,
                    fontWeight: 'bold',
                    textColor: '#FF69B4',
                    glowStrength: 80,
                    glowColor: '#FFFF00',
                    useBackground: true,
                    bgOpacity: 80,
                    positionBottom: 50
                },
                minimal: {
                    fontFamily: '"Helvetica Neue", Arial, sans-serif',
                    fontSize: 40,
                    fontWeight: 'normal',
                    textColor: '#FFFFFF',
                    glowStrength: 20,
                    glowColor: '#FFFFFF',
                    useBackground: false,
                    bgOpacity: 0,
                    positionBottom: 30
                },
                karaoke: {
                    fontFamily: '"M PLUS Rounded 1c", sans-serif',
                    fontSize: 72,
                    fontWeight: 'bold',
                    textColor: '#FFFF00',
                    glowStrength: 60,
                    glowColor: '#000000',
                    useBackground: true,
                    bgOpacity: 90,
                    positionBottom: 100
                },
                youtube: {
                    fontFamily: 'Arial, sans-serif',
                    fontSize: 48,
                    fontWeight: 'normal',
                    textColor: '#FFFFFF',
                    glowStrength: 40,
                    glowColor: '#000000',
                    useBackground: true,
                    bgOpacity: 80,
                    positionBottom: 50
                },
                movie: {
                    fontFamily: '"Helvetica Neue", Arial, sans-serif',
                    fontSize: 36,
                    fontWeight: 'normal',
                    textColor: '#FFFFFF',
                    glowStrength: 30,
                    glowColor: '#000000',
                    useBackground: false,
                    bgOpacity: 0,
                    positionBottom: 40
                }
            };
            
            const preset = presets[presetName];
            if (preset) {
                document.getElementById('font-family').value = preset.fontFamily;
                document.getElementById('font-size').value = preset.fontSize;
                document.getElementById('font-weight').value = preset.fontWeight;
                document.getElementById('text-color').value = preset.textColor;
                document.getElementById('text-color-hex').value = preset.textColor;
                document.getElementById('glow-strength').value = preset.glowStrength;
                document.getElementById('glow-color').value = preset.glowColor;
                document.getElementById('glow-color-hex').value = preset.glowColor;
                document.getElementById('use-background').checked = preset.useBackground;
                document.getElementById('bg-opacity').value = preset.bgOpacity;
                document.getElementById('position-bottom').value = preset.positionBottom;
                
                updatePreview();
            }
        }
        
        // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼å†ç”Ÿæ©Ÿèƒ½
        function playPreview() {
            if (playInterval) return;
            
            const lyrics = document.getElementById('lyrics-input').value.split('\n').filter(l => l.trim());
            const duration = parseFloat(document.getElementById('duration-per-line').value) * 1000;
            
            playInterval = setInterval(() => {
                if (currentLyricIndex >= lyrics.length) {
                    currentLyricIndex = 0;
                }
                
                document.getElementById('preview-text').textContent = lyrics[currentLyricIndex];
                document.getElementById('current-lyric-info').textContent = `ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼: ${currentLyricIndex + 1}/${lyrics.length}è¡Œç›®`;
                
                // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é©ç”¨
                applyAnimation();
                
                currentLyricIndex++;
            }, duration);
        }
        
        function pausePreview() {
            if (playInterval) {
                clearInterval(playInterval);
                playInterval = null;
            }
        }
        
        function resetPreview() {
            pausePreview();
            currentLyricIndex = 0;
            const lyrics = document.getElementById('lyrics-input').value.split('\n').filter(l => l.trim());
            if (lyrics.length > 0) {
                document.getElementById('preview-text').textContent = lyrics[0];
                document.getElementById('current-lyric-info').textContent = `ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼: 1è¡Œç›®`;
            }
        }
        
        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é©ç”¨
        function applyAnimation() {
            const animIn = document.getElementById('animation-in').value;
            const previewLyrics = document.getElementById('preview-lyrics');
            
            // ä¸€æ—¦ãƒªã‚»ãƒƒãƒˆ
            previewLyrics.style.animation = 'none';
            
            // å°‘ã—é…å»¶ã—ã¦ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹
            setTimeout(() => {
                if (animIn === 'fade') {
                    previewLyrics.style.animation = 'fadeIn 0.5s ease';
                } else if (animIn === 'slide-up') {
                    previewLyrics.style.animation = 'slideUp 0.5s ease';
                } else if (animIn === 'scale') {
                    previewLyrics.style.animation = 'scaleIn 0.5s ease';
                } else if (animIn === 'bounce') {
                    previewLyrics.style.animation = 'bounceIn 0.5s ease';
                }
            }, 10);
        }
        
        // JSONç”Ÿæˆ
        function generateJSON() {
            const lyrics = document.getElementById('lyrics-input').value.split('\n').filter(l => l.trim());
            const durationPerLine = parseFloat(document.getElementById('duration-per-line').value);
            
            const lyricsData = lyrics.map((text, index) => ({
                startTime: index * durationPerLine,
                endTime: (index + 1) * durationPerLine,
                text: text.trim()
            }));
            
            const styleSettings = {
                fontFamily: document.getElementById('font-family').value,
                fontSize: `${document.getElementById('font-size').value}px`,
                fontWeight: document.getElementById('font-weight').value,
                color: document.getElementById('text-color').value,
                glowStrength: document.getElementById('glow-strength').value,
                glowColor: document.getElementById('glow-color').value,
                useBackground: document.getElementById('use-background').checked,
                backgroundOpacity: document.getElementById('bg-opacity').value / 100,
                positionBottom: `${document.getElementById('position-bottom').value}px`,
                animationIn: document.getElementById('animation-in').value,
                animationOut: document.getElementById('animation-out').value,
                animationSpeed: document.getElementById('animation-speed').value
            };
            
            const output = {
                lyrics: lyricsData,
                style: styleSettings
            };
            
            // ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
            const blob = new Blob([JSON.stringify(output, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'lyrics-config.json';
            a.click();
            URL.revokeObjectURL(url);
            
            alert('è¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸï¼\nã“ã®JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’React Remotionãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚');
        }
        
        // ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼
        function exportStyles() {
            const styleCode = `
// ç”Ÿæˆã•ã‚ŒãŸã‚¹ã‚¿ã‚¤ãƒ«è¨­å®š
const lyricsStyle = {
    fontFamily: '${document.getElementById('font-family').value}',
    fontSize: '${document.getElementById('font-size').value}px',
    fontWeight: '${document.getElementById('font-weight').value}',
    color: '${document.getElementById('text-color').value}',
    textShadow: '${document.getElementById('preview-text').style.textShadow}',
    textAlign: 'center',
    margin: 0
};

const backgroundStyle = {
    display: ${document.getElementById('use-background').checked ? "'inline-block'" : "'contents'"},
    backgroundColor: 'rgba(0, 0, 0, ${document.getElementById('bg-opacity').value / 100})',
    padding: '20px 40px',
    borderRadius: '15px',
    backdropFilter: 'blur(10px)'
};

const containerStyle = {
    position: 'absolute',
    bottom: '${document.getElementById('position-bottom').value}px',
    left: '50%',
    transform: 'translateX(-50%)',
    width: '100%',
    textAlign: 'center'
};`;
            
            navigator.clipboard.writeText(styleCode);
            alert('ã‚¹ã‚¿ã‚¤ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼');
        }
        
        // ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å‡¦ç†
        const audioUpload = document.getElementById('audio-upload');
        const audioFile = document.getElementById('audio-file');
        
        audioUpload.addEventListener('click', () => audioFile.click());
        
        audioUpload.addEventListener('dragover', (e) => {
            e.preventDefault();
            audioUpload.classList.add('dragover');
        });
        
        audioUpload.addEventListener('dragleave', () => {
            audioUpload.classList.remove('dragover');
        });
        
        audioUpload.addEventListener('drop', (e) => {
            e.preventDefault();
            audioUpload.classList.remove('dragover');
            
            const file = e.dataTransfer.files[0];
            if (file && file.type === 'audio/mpeg') {
                processAudioFile(file);
            }
        });
        
        audioFile.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                processAudioFile(file);
            }
        });
        
        function processAudioFile(file) {
            const audio = new Audio();
            audio.src = URL.createObjectURL(file);
            
            audio.addEventListener('loadedmetadata', () => {
                audioDuration = audio.duration;
                
                const lyrics = document.getElementById('lyrics-input').value.split('\n').filter(l => l.trim());
                const durationPerLine = audioDuration / lyrics.length;
                
                document.getElementById('duration-per-line').value = durationPerLine.toFixed(1);
                
                alert(`éŸ³æ¥½ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿å®Œäº†ï¼\né•·ã•: ${audioDuration.toFixed(1)}ç§’\n1è¡Œã‚ãŸã‚Š: ${durationPerLine.toFixed(1)}ç§’`);
            });
        }
        
        // CSS ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®šç¾©
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
            }
            
            @keyframes slideUp {
                from { 
                    opacity: 0;
                    transform: translateX(-50%) translateY(50px);
                }
                to { 
                    opacity: 1;
                    transform: translateX(-50%) translateY(0);
                }
            }
            
            @keyframes scaleIn {
                from { 
                    opacity: 0;
                    transform: translateX(-50%) scale(0.8);
                }
                to { 
                    opacity: 1;
                    transform: translateX(-50%) scale(1);
                }
            }
            
            @keyframes bounceIn {
                0% { 
                    opacity: 0;
                    transform: translateX(-50%) translateY(30px);
                }
                60% { 
                    opacity: 1;
                    transform: translateX(-50%) translateY(-10px);
                }
                100% { 
                    transform: translateX(-50%) translateY(0);
                }
            }
        `;
        document.head.appendChild(style);
        
        // ç°¡å˜å‹•ç”»ç”Ÿæˆï¼ˆæ–°æ©Ÿèƒ½ï¼‰
        async function generateVideoQuick() {
            // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
            const lyrics = document.getElementById('lyrics-input').value.split('\n').filter(l => l.trim());
            if (lyrics.length === 0) {
                alert('âŒ æ­Œè©ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }
            
            // é€²æ—è¡¨ç¤ºé–‹å§‹
            showProgress('ğŸ¬ å‹•ç”»ç”Ÿæˆã‚’é–‹å§‹ã—ã¦ã„ã¾ã™...', 0);
            
            try {
                // 1. JSONè¨­å®šã‚’æº–å‚™
                updateProgress('ğŸ“ è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’æº–å‚™ä¸­...', 20);
                const config = await prepareVideoConfig();
                
                // 2. Remotion ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ
                updateProgress('ğŸ¥ å‹•ç”»ã‚’ç”Ÿæˆä¸­... (ã“ã‚Œã«ã¯æ•°åˆ†ã‹ã‹ã‚Šã¾ã™)', 40);
                await generateVideoWithRemotion(config);
                
                // 3. å®Œäº†
                updateProgress('âœ… å‹•ç”»ç”Ÿæˆå®Œäº†ï¼ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚’é–‹å§‹ã—ã¾ã™', 100);
                
                setTimeout(() => {
                    hideProgress();
                    alert('ğŸ‰ å‹•ç”»ç”ŸæˆãŒå®Œäº†ã—ã¾ã—ãŸï¼\nä¿å­˜å…ˆ: out/lyrics-with-audio.mov');
                }, 1500);
                
            } catch (error) {
                hideProgress();
                alert('âŒ å‹•ç”»ç”Ÿæˆã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:\n' + error.message);
                console.error(error);
            }
        }
        
        // Remotion Studio ã‚’é–‹ã
        function openRemotionStudio() {
            // ã¾ãšJSONã‚’ç”Ÿæˆ
            generateJSON();
            
            // Remotion Studioã‚’é–‹ãèª¬æ˜
            alert('ğŸ“– æ¬¡ã®æ‰‹é †ã§è©³ç´°ç·¨é›†ã‚’è¡Œã£ã¦ãã ã•ã„:\n\n1. ç”Ÿæˆã•ã‚ŒãŸJSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«é…ç½®\n2. ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ "npm start" ã‚’å®Ÿè¡Œ\n3. ãƒ–ãƒ©ã‚¦ã‚¶ã§RemotionStudioãŒé–‹ãã¾ã™\n4. "LyricsWithAudio"ã‚’é¸æŠã—ã¦ç·¨é›†');
            
            // æ–°ã—ã„ã‚¿ãƒ–ã§localhost:3000ã‚’é–‹ã
            window.open('http://localhost:3000', '_blank');
        }
        
        // å‹•ç”»è¨­å®šã‚’æº–å‚™
        async function prepareVideoConfig() {
            const lyrics = document.getElementById('lyrics-input').value.split('\n').filter(l => l.trim());
            const durationPerLine = parseFloat(document.getElementById('duration-per-line').value);
            
            const lyricsData = lyrics.map((text, index) => ({
                startTime: index * durationPerLine,
                endTime: (index + 1) * durationPerLine,
                text: text.trim()
            }));
            
            const styleSettings = {
                fontFamily: document.getElementById('font-family').value,
                fontSize: `${document.getElementById('font-size').value}px`,
                fontWeight: document.getElementById('font-weight').value,
                color: document.getElementById('text-color').value,
                glowStrength: document.getElementById('glow-strength').value,
                glowColor: document.getElementById('glow-color').value,
                useBackground: document.getElementById('use-background').checked,
                backgroundOpacity: document.getElementById('bg-opacity').value / 100,
                positionBottom: `${document.getElementById('position-bottom').value}px`,
                animationIn: document.getElementById('animation-in').value,
                animationOut: document.getElementById('animation-out').value,
                animationSpeed: document.getElementById('animation-speed').value
            };
            
            return {
                lyrics: lyricsData,
                style: styleSettings
            };
        }
        
        // å®Ÿéš›ã®å‹•ç”»ç”Ÿæˆï¼ˆãƒ‡ãƒ¢ç‰ˆ - å®Ÿéš›ã®å®Ÿè£…ã§ã¯ backend API ã‚’å‘¼ã¶ï¼‰
        async function generateVideoWithRemotion(config) {
            // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ã€ã“ã“ã§ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIã‚’å‘¼ã³å‡ºã—ã¦
            // Remotion ã® npm run build:with-audio ã‚’å®Ÿè¡Œã—ã¾ã™
            
            // ç¾åœ¨ã¯ãƒ‡ãƒ¢ã¨ã—ã¦5ç§’å¾…æ©Ÿ
            for (let i = 40; i <= 90; i += 10) {
                await new Promise(resolve => setTimeout(resolve, 500));
                updateProgress(`ğŸ¥ å‹•ç”»ã‚’ç”Ÿæˆä¸­... ${i}%`, i);
            }
            
            // TODO: å®Ÿéš›ã®Remotionå®Ÿè¡Œ
            // const response = await fetch('/api/generate-video', {
            //     method: 'POST',
            //     headers: { 'Content-Type': 'application/json' },
            //     body: JSON.stringify(config)
            // });
        }
        
        // é€²æ—è¡¨ç¤º
        function showProgress(message, percent) {
            document.getElementById('progress-area').style.display = 'block';
            document.getElementById('progress-text').textContent = message;
            document.getElementById('progress-bar').style.width = `${percent}%`;
        }
        
        function updateProgress(message, percent) {
            document.getElementById('progress-text').textContent = message;
            document.getElementById('progress-bar').style.width = `${percent}%`;
        }
        
        function hideProgress() {
            document.getElementById('progress-area').style.display = 'none';
        }
        
        // ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã®ä½ç½®èª¿æ•´
        document.addEventListener('mouseover', function(e) {
            if (e.target.closest('.tooltip')) {
                const tooltip = e.target.closest('.tooltip');
                const tooltipText = tooltip.querySelector('.tooltiptext');
                if (tooltipText) {
                    // ãƒã‚¦ã‚¹ã®ä½ç½®ã‚’å–å¾—
                    const rect = e.target.getBoundingClientRect();
                    const viewportWidth = window.innerWidth;
                    const viewportHeight = window.innerHeight;
                    
                    // ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã®é«˜ã•ã‚’è€ƒæ…®
                    const tooltipHeight = 120; // æ¨å®šãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—é«˜ã•
                    
                    // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯è¦ç´ ã®ä¸Šã«è¡¨ç¤º
                    let left = rect.left + (rect.width / 2) - 140; // 280pxå¹…ã®åŠåˆ†
                    let top = rect.top - tooltipHeight - 10; // è¦ç´ ã®ä¸Š
                    
                    // å·¦ç«¯ã‹ã‚‰ã¯ã¿å‡ºã‚‹å ´åˆ
                    if (left < 10) {
                        left = 10;
                    }
                    // å³ç«¯ã‹ã‚‰ã¯ã¿å‡ºã‚‹å ´åˆ
                    if (left + 280 > viewportWidth - 10) {
                        left = viewportWidth - 290;
                    }
                    
                    // ä¸Šç«¯ã‹ã‚‰ã¯ã¿å‡ºã‚‹å ´åˆã¯è¦ç´ ã®ä¸‹ã«è¡¨ç¤º
                    if (top < 10) {
                        top = rect.bottom + 10;
                    }
                    
                    // ãƒœã‚¿ãƒ³ã‚¨ãƒªã‚¢ã¨é‡è¤‡ã—ãªã„ã‚ˆã†ã€ã•ã‚‰ã«ä¸Šã«é…ç½®
                    if (top + tooltipHeight > rect.top && top < rect.bottom) {
                        // è¦ç´ ã¨é‡è¤‡ã™ã‚‹å ´åˆã¯ã€å¿…ãšè¦ç´ ã®ä¸Šã«é…ç½®
                        top = rect.top - tooltipHeight - 15;
                        // ãã‚Œã§ã‚‚ç”»é¢ä¸Šç«¯ã‚’è¶…ãˆã‚‹å ´åˆã¯å³å´ã«é…ç½®
                        if (top < 10) {
                            top = rect.top;
                            left = rect.right + 15;
                            // å³ç«¯ã‹ã‚‰ã¯ã¿å‡ºã‚‹å ´åˆã¯å·¦å´ã«
                            if (left + 280 > viewportWidth - 10) {
                                left = rect.left - 280 - 15;
                            }
                        }
                    }
                    
                    tooltipText.style.left = left + 'px';
                    tooltipText.style.top = top + 'px';
                    tooltipText.style.pointerEvents = 'none'; // ãƒã‚¦ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆã‚’é€šã™
                }
            }
        });
        
        // åˆæœŸåŒ–
        updatePreview();
    </script>
</body>
</html>